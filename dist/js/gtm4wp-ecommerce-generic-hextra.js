function gtm4wp_make_sure_is_float(e){let t=e;return"string"==typeof t?isNaN(t=parseFloat(t))&&(t=0):"number"!=typeof t&&(t=0),t=t.toFixed(2)}function gtm4wp_push_ecommerce(e,t,r,n=!1,a=2e3){let i=r||{};i.items=t,gtm4wp_clear_ecommerce&&window[gtm4wp_datalayer_name].push({ecommerce:null});let o={event:e,ecommerce:i};n&&(o.eventCallback=n,o.eventTimeout=a),("add_to_cart"===e||"view_item"===e)&&window[gtm4wp_datalayer_name].push(o),document.addEventListener("wcc_gcm_updated",function(e){window[gtm4wp_datalayer_name].push(o)})}function gtm4wp_read_from_json(e,t=["productlink","internal_id"]){try{let r=JSON.parse(e);if(r){if(r.price&&(r.price=gtm4wp_make_sure_is_float(r.price)),t&&t.length>0)for(let n=0;n<t.length;n++)delete r[t[n]];return r}}catch(a){console&&console.error&&console.error(a.message)}return!1}function gtm4wp_read_json_from_node(e,t,r=["productlink","internal_id"]){return!!e&&!!e.dataset&&!!e.dataset[t]&&gtm4wp_read_from_json(e.dataset[t],r)}function gtm4wp_update_json_in_node(e,t,r,n){if(e&&e.dataset&&e.dataset[t])try{let a=JSON.parse(e.dataset[t]);if(a)return a.price&&(a.price=gtm4wp_make_sure_is_float(a.price)),a[r]=n,e.dataset[t]=JSON.stringify(a),!0}catch(i){console&&console.error&&console.error(i.message)}return!1}
